(()=>{"use strict";class t{constructor(t,i=null,s=[],r=null,n){if(this.node=t,this.parent=i,this.css=new e(t),this.html=[],this.usedIds=s,this.variants=r,this.type=n,this.css=new e(t,r,n,this.html),this.variants){let t=Object.values(this.variants);this.variant_css_class=t.reduce(((t,e,i)=>0==i?t:t+`${this.nameCorrector(e)} `),"").replace("default","").trim()}else this.variant_css_class=""}generator(t=0,e=this.usedIds,i=null){if(this.shouldSkipNode())return;const s=this.nameCorrector(this.node.name),r=this.generateUniqueId(s,e),n=" ".repeat(2*t),o=`${n}${this.tagHandler(s,r,this.node)}`;if(i){let t=this.nameCorrector(i.name);if(["h1","h2","h3","h4","h5","h6","p","span"].includes(t))return`${n} ${this.node.characters} \n`}if(this.isImageElement(s)||this.isInputElement(s))return o;const a=`${n}</${this.correctTagForNode()}>\n`;this.generateHtmlForChildren(t,e,this.node);const h=o+this.html.join("\n")+a;let l=`\n          .${s}${this.variant_css_class?"."+this.variant_css_class:""}\n         `;return this.css.generator(l,this.node,this.variants,this.type,this.parent,this.html),h}shouldSkipNode(){return this.parent&&this.node.name.toLowerCase()===this.parent.name.toLowerCase()}isImageElement(t){return"img"===t}isInputElement(t){return"input"===t}generateHtmlForChildren(e,i,s){this.node.children&&this.node.children.forEach((r=>{const n=new t(r,this.node);this.html.push(n.generator(e+1,i,s))}))}tagHandler(t,e,i){return"image"===t?this.imageAttributes(i):"input"===t?this.inputAttributes(i):this.defaultElementBeginning(t,e)}defaultElementBeginning(t,e){return`<${this.correctTagForNode()} class="${t} ${this.variant_css_class}" id="${e}">\n`}inputAttributes(t){let e=this.nameCorrector(t.name),i=t.characters;return`<input type="${t.type}" class="${e} ${this.variant_css_class}" placeholder="${i}" />\n`}imageAttributes(t){return`<img class="img-fit" alt="${this.nameCorrector(t.name)}" src="https://picsum.photos/1600/800" />\n`}nameCorrector(t){return(t=(t=(t=t.toLowerCase()).replaceAll(" ","-")).split("=")[1]||t).includes("surface")?"page-wrapper":t}generateUniqueId(t,e){let i=t;if(e.includes(t)){const s=e.filter((e=>e===t)).length;i=t+"-"+s}return e.push(t),i}correctTagForNode(){return{button:"button",section:"section",image:"img",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6","body-copy":"p",link:"a",list:"ul","list-item":"li",form:"form",input:"input",textarea:"textarea",label:"label",select:"select",option:"option",table:"table","table-row":"tr","table-cell":"td","table-header":"th","table-body":"tbody","table-head":"thead","table-foot":"tfoot","table-caption":"caption",article:"article",aside:"aside",details:"details",summary:"summary",figure:"figure",figcaption:"figcaption",main:"main"}[this.node.name.toLowerCase()]||"div"}}class e{constructor(t,e=null,i){this.node=t,this.variants=e,this.type=i}generator(t,e,i,s,r){this.getPadding(e,r),this.getAspectRatio(e.width,e.height),this.checkMinMaxDimensions(e.minWidth,e.minHeight,e.maxWidth,e.maxHeight),this.generateGrid(e);const n=this.getBackgroundProperties(e);console.log(n,"backgroundProperties");this.getBorderProperties(e)}getPadding(t){let e=t.paddingLeft,i=t.paddingRight;return`${t.paddingTop}px ${i}px ${t.paddingBottom}px ${e}px`}getAspectRatio(t,e){return t/e}getBorderProperties(t){const{strokeAlign:e,strokeBottomWeight:i,strokeCap:s,strokeGeometry:r,strokeJoin:n,strokeLeftWeight:o,strokeMiterLimit:a,strokeRightWeight:h,strokeStyleId:l,strokeTopWeight:d,strokeWeight:c,strokes:p,topLeftRadius:g,topRightRadius:u,bottomLeftRadius:m,bottomRightRadius:f}=t;let $,b=JSON.parse(JSON.stringify(p)).reverse()[0];if(!b)return"";b&&($=`rgba(${Math.round(255*b.color.r)}, ${Math.round(255*b.color.g)}, ${Math.round(255*b.color.b)}, ${b.opacity.toFixed(2)})`);let x=[`border-width: ${d}px ${h}px ${i}px ${o}px`,"border-style: solid",`border-color: ${$}`,`border-radius: ${g}px ${u}px ${f}px ${m}px`].filter(Boolean).join(";\n");console.log(x,"styles")}getBackgroundProperties(t){let e="";return t.fills.forEach(((t,i)=>{if("SOLID"===t.type&&t.visible){const i=`rgba(${Math.round(255*t.color.r)}, ${Math.round(255*t.color.g)}, ${Math.round(255*t.color.b)}, ${t.opacity.toFixed(2)})`;e+=`background-color: ${i};\n`}else if("IMAGE"===t.type&&t.visible){e+=`background-image: url(${"https://picsum.photos/1600/800"});\n`,e+="background-size: cover;\n",e+="background-repeat: no-repeat;\n",e+="background-position: center center;\n"}else if("GRADIENT_LINEAR"===t.type&&t.visible){const i=t.gradientStops.map((t=>`rgba(${Math.round(255*t.color.r)}, ${Math.round(255*t.color.g)}, ${Math.round(255*t.color.b)}, ${t.color.a.toFixed(2)}) ${100*t.position.toFixed(2)}%`)).join(", ");e+=`background: linear-gradient(${t.gradientTransform[0][2].toFixed(2)}deg, ${i});\n`}})),e}checkMinMaxDimensions(t,e,i,s){let r="";return t&&(r+=`min-width:${t}px; \n`),e&&(r+=`min-height:${e}px; \n`),i&&(r+=`max-width:${i}px; \n`),s&&(r+=`max-height:${s}px; \n`),r}generateGrid(t){if("grid"!==t.name.toLowerCase())return"";const e=t.width,i=t.children;return`display: grid;\ngrid-template-columns: ${i.map((t=>t.width/e*12)).join("fr ")+"fr"}; grid-template-rows: ${i[0].height}px;`}baseCssForNode(){return["surface-phone","surface-tablet","surface-laptop","surface-desktop"].includes(this.node.name)}}class i{constructor(e,i){const{name:s,type:r,layoutMode:n,fills:o,paddingTop:a,paddingBottom:h,paddingLeft:l,paddingRight:d,itemSpacing:c,primaryAxisAlignItems:p,counterAxisAlignItems:g,height:u,width:m,x:f,y:$,rotation:b,opacity:x,visible:y,locked:k,constraints:v,effects:A,parent:w,children:C,description:T,variantProperties:M}=e;this.node=e,this.name=s,this.type=r,this.autoLayout=n,this.fill=o,this.paddingTop=a,this.paddingBottom=h,this.paddingLeft=l,this.paddingRight=d,this.spacing=c,this.direction=p,this.counterAxis=g,this.height=u,this.width=m,this.x=f,this.y=$,this.rotation=b,this.opacity=x,this.visible=y,this.locked=k,this.constraints=v,this.effects=A,this.parent=w,this.children=this.getChildrenArray(C,i),this.desc=T,this.variants=null,"TEXT"===r&&this.getTextProperties(e),this.isComponentType()&&(this.variants=M),this.html=new t(e,null,i,this.variants,this.type)}getChildrenArray(t,e){return t?t.filter((t=>!0===t.visible)).map((t=>new i(t,e))):[]}getTextProperties(t){const{characters:e,fontSize:i,fontName:s,textAlignHorizontal:r,textAlignVertical:n}=t;this.textValue=e,this.fontSize=i,this.fontFamily=s.family,this.textAlign=r,this.textVerticalAlign=n}isComponentType(){return["COMPONENT","INSTANCE","COMPONENT_SET"].includes(this.type)}}const s=i;let r=[];const n=figma.currentPage.selection[0];if(n){new s(n,r).html.generator()}else figma.closePlugin("Please select a layer and try again");figma.closePlugin()})();
//# sourceMappingURL=code.js.map